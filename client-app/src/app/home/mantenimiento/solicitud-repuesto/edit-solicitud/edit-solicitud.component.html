<h2 class="form-add-edit-sol-repuesto-title">Crear Solicitud de Repuestos</h2>
<form class="compact" #repuestoForm="ngForm">
  <div class="form-group row flex-items-xs-left">
    <div class="col-xs-1">
      <label class="form-add-edit-repuesto-label" for="estado">Estado:</label>
    </div>
    <div class="col-xs-3">
      <input class="form-control" id="estado"
             name="codigoDes" [(ngModel)]="estado">
    </div>
    <div class="col-xs-1"></div>
    <div class="col-xs-1">
      <label class="form-add-edit-repuesto-label" for="fechaSolicitud">Fecha:</label>
    </div>
    <div class="col-xs-2">
      <input class="form-control" placeholder="dd/mm/yyyy"
             id="fechaSolicitud" name="fechaSolicitud"
             [(ngModel)]="fechaSolicitud">
    </div>
  </div>

  <h6 class="form-add-edit-sol-repuesto-title">Repuestos</h6>
  <section>
    <clr-datagrid>
      <clr-dg-action-bar>
        <div class="btn-group">
          <button type="button" class="btn btn-sm btn-secondary"
                  (click)="addNewRepuesto()">
            <clr-icon shape="plus"></clr-icon>
            Agregar
          </button>

          <button type="button" class="btn btn-sm btn-secondary"
                  *ngIf="repuestoSeleccionado != null"
                  (click)="editRepuesto()">
            <clr-icon shape="plus"></clr-icon>
            Editar
          </button>
        </div>
      </clr-dg-action-bar>
      <clr-dg-column>Código</clr-dg-column>
      <clr-dg-column>Descripción</clr-dg-column>
      <clr-dg-column>Cantidad Adquirida</clr-dg-column>
      <clr-dg-column>Precio</clr-dg-column>
      <clr-dg-column></clr-dg-column>
      <clr-dg-row *ngFor="let repuesto of repuestos"
                  (click)="selectRepuesto(repuesto)"
                  [class.selectRepuesto]="repuesto === repuestoSeleccionado">
        <clr-dg-cell>{{repuesto.codigo}}</clr-dg-cell>
        <clr-dg-cell>{{repuesto.descripcionArticulo}}</clr-dg-cell>
        <clr-dg-cell>{{repuesto.cantidadAdquirida}}</clr-dg-cell>
        <clr-dg-cell>{{repuesto.precio}}</clr-dg-cell>
        <clr-dg-cell>
          <button class="btn btn-sm btn-warning"
                  (click)="eliminarRepuesto(repuesto)">
            Eliminar
          </button>
        </clr-dg-cell>
      </clr-dg-row>
    </clr-datagrid>
  </section>

  <section class="form-block">
    <button class="btn btn-sm btn-success"
            [disabled]="(repuestoForm.form.invalid )"
            (click)="onSaveSolicitudRepuesto()">
      <clr-icon shape="floppy"></clr-icon>
      Save
    </button>

    <button class="btn btn-sm btn-secondary"
            (click)="goBack()">
      <clr-icon shape="window-close"></clr-icon>
      Cancel
    </button>
  </section>
</form>

<!--Modal para agregar o editar los datos de un repuesto-->
<app-repuesto *ngIf="modalAddEditRepuestoOpen"
              [repuesto]="repuestoSeleccionado"
              [isEditRepuesto]="isEditRepuesto"
              (repuestoToUpdate)="addEditRepuesto($event)"
              (cancelAddEditRepuesto)="onCancelAddEditRepuesto($event)">
</app-repuesto>
