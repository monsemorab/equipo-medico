<h2 class="form-edit-equipo-title">Editar Equipo</h2>
<form class="compact" #equipoForm="ngForm">
    <section class="form-block">
        <div class="form-group row flex-items-xs-left">
            <!--columna izquierda-->
            <div class="col-xs-5">
                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-3 ">
                        <label class="form-edit-equipo-label required" for="serie">Nro. Serie:</label>
                    </div>
                    <div class="col-xs-6">
                        <input class="form-control" id="serie" required
                               name="serie" [(ngModel)]="numeroSerie">
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-3 ">
                        <label class="form-edit-equipo-label required" for="lote">Nro. Lote:</label>
                    </div>
                    <div class="col-xs-6">
                        <input class="form-control" id="lote" required
                               name="lote" [(ngModel)]="numeroLote">
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-3 ">
                        <label class="form-edit-equipo-label required">Estado:</label>
                    </div>
                    <div class="col-xs-7">
                        <div class="select form-control">
                            <select class="select-form-edit-equipo" id="estado" #selectedEstado
                                    name="estado"
                                    [(ngModel)]="estado"
                                    (change)="onSelectedEstado(selectedEstado.value)">
                                <option>Operativo</option>
                                <option>Inoperativo</option>
                                <option>Irreparable</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-3 ">
                        <label class="form-edit-equipo-label required">Tipo:</label>
                    </div>
                    <div class="col-xs-7" *ngIf="tipos != null && tipos.length > 0">
                        <p-dropdown [options]="tipos" name="tipo"
                                    [(ngModel)]="tipoSeleccionado" optionLabel="tipo"
                                    (onChange)="onSelectedTipoEquipo($event)">
                        </p-dropdown>
                    </div>

                    <div class="col-xs-7" *ngIf="tipos == null || tipos.length == 0">
                        <div class="select form-control">
                            <select class="select-form-edit-equipo" id="tipoE" disabled>
                                <option disabled>Agregar Tipo</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-xs-1 col-btn-edit-equipo" *ngIf="!isEditTipo">
                        <button class=" btn btn-sm btn-success"
                                (click)="addNewTipoEquipo()">
                            <clr-icon shape="plus"></clr-icon>
                            Add
                        </button>
                    </div>

                    <div class="col-xs-1 col-btn-edit-equipo" *ngIf="isEditTipo">
                        <button class=" btn btn-sm btn-success"
                                (click)="editTipoEquipo()">
                            <clr-icon shape="pencil"></clr-icon>
                            Edit
                        </button>
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-3 ">
                        <label class="form-edit-equipo-label required">Modelo:</label>
                    </div>
                    <div class="col-xs-7" *ngIf="modelos != null && modelos.length > 0">
                        <p-dropdown [options]="modelos" name="modelo"
                                    [(ngModel)]="modeloSeleccionado" optionLabel="modelo"
                                    (onChange)="onSelectedModeloEquipo($event)">
                        </p-dropdown>
                    </div>
                    <div class="col-xs-7" *ngIf="modelos == null || modelos.length == 0">
                        <div class="select form-control">
                            <select class="select-form-edit-equipo" id="modeloE" name="modeloE" disabled>
                                <option disabled>Agregar Modelo</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-xs-1 col-btn-edit-equipo" *ngIf="!isEditModelo">
                        <button class=" btn btn-sm btn-success"
                                (click)="addNewModeloEquipo()">
                            <clr-icon shape="plus"></clr-icon>
                            Add
                        </button>
                    </div>

                    <div class="col-xs-1 col-btn-edit-equipo" *ngIf="isEditModelo">
                        <button class=" btn btn-sm btn-success"
                                (click)="editModeloEquipo()">
                            <clr-icon shape="pencil"></clr-icon>
                            Edit
                        </button>
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-3 ">
                        <label class="form-edit-equipo-label" for="costo">Costo:</label>
                    </div>
                    <div class="col-xs-6">
                        <input class="form-control" id="costo"
                               name="costo" [(ngModel)]="costo">
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-3 ">
                        <label class="form-edit-equipo-label" for="fab">Fabricación:</label>
                    </div>
                    <div class="col-xs-6">
                        <input class="form-control" type="date"
                               id="fab" name="fab"
                               [(ngModel)]="fechaFabricacion">
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-3 ">
                        <label class="form-edit-equipo-label" for="garantia">Vto. Garantia:</label>
                    </div>
                    <div class="col-xs-6">
                        <input class="form-control" type="date"
                               id="garantia" name="garantia"
                               [(ngModel)]="fechaVenGarantia">
                    </div>
                </div>
            </div>

            <!--columna derecha-->
            <div class="col-xs-7">
                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-4 ">
                        <label class="form-edit-equipo-label required" for="patrimonial">Nro. Patrimonial:</label>
                    </div>
                    <div class="col-xs-5">
                        <input class="form-control" id="patrimonial"
                               name="patrimonial" [(ngModel)]="numeroPatrimonial">
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-4 ">
                        <label class="form-edit-equipo-label required">Representante:</label>
                    </div>

                    <div class="col-xs-6" *ngIf="representantes != null && representantes.length > 0">
                        <p-dropdown [options]="representantes" name="repre"
                                    [(ngModel)]="repreSeleccionado" optionLabel="nombre"
                                    (onChange)="onSelectedRepresentante($event)">
                        </p-dropdown>
                    </div>
                    <div class="col-xs-6" *ngIf="representantes == null || representantes.length == 0">
                        <div class="select form-control">
                            <select class="select-form-edit-equipo" id="repre" disabled>
                                <option disabled>Agregar Representante</option>
                            </select>
                        </div>
                    </div>

                    <div *ngIf="!isEditRepre" class="col-xs-1 col-btn-edit-equipo">
                        <button class="btn btn-sm btn-success"
                                (click)="addNewRepresentante()">
                            <clr-icon shape="user"></clr-icon>
                            Add
                        </button>
                    </div>
                    <div *ngIf="isEditRepre" class="col-xs-1 col-btn-edit-equipo">
                        <button class="btn btn-sm btn-success"
                                (click)="editRepresentante()">
                            <clr-icon shape="user"></clr-icon>
                            Edit
                        </button>
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-4 ">
                        <label class="form-edit-equipo-label">Ubicación:</label>
                    </div>
                    <div class="col-xs-6" *ngIf="ubicaciones != null && ubicaciones.length > 0">
                        <p-dropdown [options]="ubicaciones" name="ubicacion"
                                    [(ngModel)]="ubicacionSeleccionada" optionLabel="servicio"
                                    (onChange)="onSelectedUbicacionEquipo($event)">
                        </p-dropdown>
                    </div>
                    <div class="col-xs-6" *ngIf="ubicaciones == null || ubicaciones.length == 0">
                        <div class="select form-control">
                            <select class="select-form-edit-equipo" id="UbicacionE" disabled>
                                <option disabled>Agregar Ubicación</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-xs-1 col-btn-edit-equipo" *ngIf="!isEditUbicacion">
                        <button class=" btn btn-sm btn-success"
                                (click)="addNewUbicacionEquipo()">
                            <clr-icon shape="plus"></clr-icon>
                            Add
                        </button>
                    </div>

                    <div class="col-xs-1 col-btn-edit-equipo" *ngIf="isEditUbicacion">
                        <button class="btn btn-sm btn-success"
                                (click)="editUbicacionEquipo()">
                            <clr-icon shape="user"></clr-icon>
                            Edit
                        </button>
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-4 ">
                        <label class="form-edit-equipo-label" for="version">Version Software:</label>
                    </div>
                    <div class="col-xs-5">
                        <input class="form-control" id="version"
                               name="version" [(ngModel)]="versionSw">
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-4 ">
                        <label class="form-edit-equipo-label" for="licitacion">Nro. Licitacion Compra:</label>
                    </div>
                    <div class="col-xs-5">
                        <input class="form-control" id="licitacion"
                               name="licitacion" [(ngModel)]="licitacionCompra">
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-4 ">
                        <label class="form-edit-equipo-label" for="compra">Compra:</label>
                    </div>
                    <div class="col-xs-5">
                        <input class="form-control" type="date"
                               id="compra" name="compra"
                               [(ngModel)]="fechaCompra">
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-4 ">
                        <label class="form-edit-equipo-label" for="instalacion">Puesta en Marcha:</label>
                    </div>
                    <div class="col-xs-5">
                        <input class="form-control" type="date"
                               id="instalacion"
                               name="instalacion"
                               [(ngModel)]="fechaInstalacion">
                    </div>
                </div>

                <div class="form-group row flex-items-xs-left">
                    <div class="col-xs-4 ">
                        <label class="form-edit-equipo-label" for="descripcion">Descripción:</label>
                    </div>
                    <div class="col-xs-7">
            <textarea class="form-control" id="descripcion" rows="3"
                      name="descripcion" [(ngModel)]="descripcionEquipo">
            </textarea>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="form-block">
        <button class="btn btn-sm btn-success"
                [disabled]="(equipoForm.form.invalid )"
                (click)="onSaveEquipo()">
            <clr-icon shape="floppy"></clr-icon>
          Guardar
        </button>

        <button class="btn btn-sm btn-secondary"
                (click)="goBack()">
            <clr-icon shape="window-close"></clr-icon>
            Cancelar
        </button>
    </section>
</form>

<!--Modal para agregar o editar los datos de un representante-->
<app-representante *ngIf="modalAddEditRepreOpen"
                   [representante]="repreSeleccionado"
                   [isEditRepre]="isEditRepre"
                   (representanteToUpdate)="addEditRepresentante($event)"
                   (cancelAddEditRepre)="onCancelAddEditRepresentante($event)">
</app-representante>


<!--Modal para agregar o editar los datos del tipo del equipo -->
<app-tipo-equipo *ngIf="modalAddEditTipoOpen"
                 [tipoEquipo]="tipoSeleccionado"
                 [isEditTipo]="isEditRepre"
                 (tipoEquipoToUpdate)="addEditTipoEquipo($event)"
                 (cancelAddEditTipo)="onCancelAddEditTipoEquipo($event)">
</app-tipo-equipo>


<!--Modal para agregar o editar los datos del modelo del equipo -->
<app-modelo-equipo *ngIf="modalAddEditModeloOpen"
                   [modeloEquipo]="modeloSeleccionado"
                   [isEditModelo]="isEditRepre"
                   (modeloEquipoToUpdate)="addEditModeloEquipo($event)"
                   (cancelAddEditModelo)="onCancelAddEditModeloEquipo($event)">
</app-modelo-equipo>

<!--Modal para agregar o editar los datos de la ubicación del equipo -->
<app-ubicacion *ngIf="modalAddEditUbiOpen"
               [ubicacion]="ubicacionSeleccionada"
               [isEditUbicacion]="isEditUbicacion"
               (ubicacionToUpdate)="addEditUbicaion($event)"
               (cancelAddEditUbicacion)="onCancelAddEditUbicacion($event)">
</app-ubicacion>
