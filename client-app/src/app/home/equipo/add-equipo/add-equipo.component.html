<h2 class="form-add-equipo-title">Crear Equipo</h2>
<form clrForm #equipoForm="ngForm">
  <div class="clr-row clr-justify-content-start">
    <!--columna izquierda-->
    <div class="clr-col-6">
      <clr-input-container>
        <label>Nro. Serie:</label>
        <input clrInput type="text" [(ngModel)]="numeroSerie" name="serie" required/>
        <clr-control-error>El campo es obligatorio</clr-control-error>
      </clr-input-container>

      <clr-input-container>
        <label>Nro. Lote:</label>
        <input clrInput type="text" [(ngModel)]="numeroLote" name="lote"/>
      </clr-input-container>

      <clr-input-container>
        <label>Costo:</label>
        <input clrInput type="text" [(ngModel)]="costo" name="costo"/>
      </clr-input-container>

      <clr-input-container>
        <label>Fabricación:</label>
        <input clrInput type="text" [(ngModel)]="fechaFabricacion" name="fab"
               placeholder="yyyy"/>
      </clr-input-container>

      <clr-textarea-container>
        <label>Descripción:</label>
        <textarea class="tamanho-total" clrTextarea [(ngModel)]="descripcionEquipo" name="description"></textarea>
      </clr-textarea-container>

      <clr-input-container>
        <label>Ingrese Marca:</label>
        <input class="tamanho-medio"  clrInput type="text" [(ngModel)]="marca" name="marca" [disabled]="marcaFueSeleccionada" required/>
        <clr-control-error>El campo es obligatorio</clr-control-error>
      </clr-input-container>

      <clr-select-container>
        <label>Seleccione Marca</label>
        <select clrSelect name="marcaId" [(ngModel)]="marcaId"
                (ngModelChange)="onSelectMarca()" [disabled]="marca != ''" required>
          <option>Seleccionar Marca</option>
          <option *ngFor="let marca of marcas"
                  value={{marca.id}}>{{marca.marca}}
          </option>
        </select>
      </clr-select-container>

      <clr-input-container>
        <label>Ingrese Modelo:</label>
        <input class="tamanho-medio" clrInput type="text" [(ngModel)]="modelo" name="modelo" [disabled]="modeloFueSeleccionado" required/>
        <clr-control-error>El campo es obligatorio</clr-control-error>
      </clr-input-container>
      <clr-select-container>
        <label>Modelo</label>
        <select clrSelect name="modeloId" [(ngModel)]="modeloId"
                (ngModelChange)="onSelectModelo()" [disabled]="modelo != ''" required>
          <option>Seleccionar Modelo</option>
          <option *ngFor="let modelo of modelos"
                  value={{modelo.id}}>{{modelo.modelo}}
          </option>
        </select>
      </clr-select-container>
    </div>

    <!--columna derecha-->
    <div class="clr-col-6">
      <clr-input-container>
        <label>Nro. Patrimonial:</label>
        <input clrInput type="text" [(ngModel)]="numeroPatrimonial" name="patrimonial"/>
      </clr-input-container>

      <clr-select-container>
        <label>Estado</label>
        <select clrSelect name="estado" [(ngModel)]="estado">
          <option value="Operativo">Operativo</option>
          <option value="Inoperativo">Inoperativo</option>
          <option value="Irreparable">Irreparable</option>
        </select>
      </clr-select-container>

      <clr-input-container>
        <label>Fecha Compra:</label>
        <input clrInput type="date" [(ngModel)]="fechaCompra" name="fechaCompra"
               min="1990-01-01" max="2050-12-31"/>
      </clr-input-container>

      <clr-input-container>
        <label>Vto. Garantia:</label>
        <input clrInput type="date" [(ngModel)]="fechaVenGarantia" name="fechaVenGarantia"
               min="1990-01-01" max="2050-12-31"/>
      </clr-input-container>

      <clr-input-container>
        <label>Puesta en Marcha:</label>
        <input clrInput type="date" [(ngModel)]="fechaInstalacion" name="fechaInstalacion"
               min="1990-01-01" max="2050-12-31"/>
      </clr-input-container>

      <clr-input-container>
        <label>Version Software:</label>
        <input clrInput type="text" [(ngModel)]="versionSw" name="versionSw"/>
      </clr-input-container>
    </div>
  </div>
  <br/>
  <div class="clr-row clr-justify-content-start">
    <label class="clr-col-1 clr-align-self-end form-add-equipo-label">Tipo:</label>
    <div class="clr-col-3">
      <select clrSelect name="tipoId" [(ngModel)]="tipoId"
              (ngModelChange)="onSelectTipo()" required>
        <option>Agregar Tipo</option>
        <option *ngFor="let tipo of tipos"
                value={{tipo.id}}>{{tipo.tipo}}
        </option>
      </select>
    </div>

    <div class="clr-col-1 clr-align-self-end" *ngIf="tipoId == 'Agregar Tipo'">
      <a class=" btn btn-sm btn-success"
         (click)="addNewTipoEquipo()">
        <clr-icon shape="plus"></clr-icon>
        Add
      </a>
    </div>

    <div class="clr-col-1 clr-align-self-end" *ngIf="tipoId != 'Agregar Tipo'">
      <a class=" btn btn-sm btn-success"
         (click)="editTipoEquipo()">
        <clr-icon shape="pencil"></clr-icon>
        Edit
      </a>
    </div>
  </div>

  <div class="clr-row clr-justify-content-start">
    <label class="clr-col-1 clr-align-self-end form-add-equipo-label">Representante:</label>
    <div class="clr-col-3">
      <select clrSelect name="repreId" [(ngModel)]="repreId"
              (ngModelChange)="onSelectRepresentante()" required>
        <option>Agregar Representante</option>
        <option *ngFor="let repre of representantes"
                value={{repre.id}}>{{repre.nombre}}
        </option>
      </select>
    </div>

    <div class="clr-col-1 clr-align-self-end" *ngIf="repreId == 'Agregar Representante'">
      <a class=" btn btn-sm btn-success"
         (click)="addNewRepresentante()">
        <clr-icon shape="plus"></clr-icon>
        Add
      </a>
    </div>

    <div class="clr-col-1 clr-align-self-end" *ngIf="repreId != 'Agregar Representante'">
      <a class=" btn btn-sm btn-success"
         (click)="editRepresentante()">
        <clr-icon shape="pencil"></clr-icon>
        Edit
      </a>
    </div>
  </div>

  <div class="clr-row clr-justify-content-start">
    <label class="clr-col-1 clr-align-self-end form-add-equipo-label">Ubicación:</label>
    <div class="clr-col-3">
      <select clrSelect name="ubicacionId" [(ngModel)]="ubicacionId"
              (ngModelChange)="onSelectUbicacion()">
        <option>Agregar Ubicación</option>
        <option *ngFor="let ubicacion of ubicaciones"
                value={{ubicacion.id}}>{{ubicacion.servicio}}
        </option>
      </select>
    </div>

    <div class="clr-col-1 clr-align-self-end" *ngIf="ubicacionId == 'Agregar Ubicación'">
      <a class=" btn btn-sm btn-success"
         (click)="addNewUbicacionEquipo()">
        <clr-icon shape="plus"></clr-icon>
        Add
      </a>
    </div>

    <div class="clr-col-1 clr-align-self-end" *ngIf="ubicacionId != 'Agregar Ubicación'">
      <a class=" btn btn-sm btn-success"
         (click)="editUbicacionEquipo()">
        <clr-icon shape="pencil"></clr-icon>
        Edit
      </a>
    </div>
  </div>
  <br/><br/>
  <div class="clr-row clr-justify-content-start">
    <button class="btn btn-sm btn-success"
            [disabled]="(equipoForm.form.invalid )"
            (click)="onSaveEquipo()">
      <clr-icon shape="floppy"></clr-icon>
      Guardar
    </button>

    <button class="btn btn-sm btn-secondary"
            (click)="goBack()">
      <clr-icon shape="window-close"></clr-icon>
      Cancelar
    </button>
  </div>
</form>

<!--Modal para agregar o editar los datos de un representante-->
<app-representante *ngIf="modalAddEditRepreOpen"
                   [representante]="repreSeleccionado"
                   [isEditRepre]="isEditRepre"
                   (representanteToUpdate)="closeRepresentanteModal($event)"
                   (cancelAddEditRepre)="closeRepresentanteModal($event)">
</app-representante>


<!--Modal para agregar o editar los datos del tipo del equipo -->
<app-tipo-equipo *ngIf="modalAddEditTipoOpen"
                 [tipoEquipo]="tipoSeleccionado"
                 [isEditTipo]="isEditRepre"
                 (tipoEquipoToUpdate)="closeTipoEquipoModal($event)"
                 (cancelAddEditTipo)="closeTipoEquipoModal($event)">
</app-tipo-equipo>

<!--Modal para agregar o editar los datos de la ubicación del equipo -->
<app-ubicacion *ngIf="modalAddEditUbiOpen"
               [ubicacion]="ubicacionSeleccionada"
               [isEditUbicacion]="isEditUbicacion"
               (ubicacionToUpdate)="closeUbicaionEquipoModal($event)"
               (cancelAddEditUbicacion)="closeUbicaionEquipoModal($event)">
</app-ubicacion>
