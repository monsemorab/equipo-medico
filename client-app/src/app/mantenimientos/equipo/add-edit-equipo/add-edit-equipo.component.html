<h5 class="form-addEditEquipo-title">{{tituloForm }}</h5>
<span class="spinner profile-view-spinner" *ngIf="!showInformation">
    Loading...
  </span>
<form class="compact" *ngIf="showInformation" #equipoForm="ngForm">

  <section class="form-block">
    <div class="form-group row flex-items-xs-left">
      <div class="col-xs-2">
        <label class="form-equipo-label" for="serie">Nro. Serie:</label>
      </div>
      <div class="col-xs-3">
        <input class="form-control" id="serie"
               name="serie" [(ngModel)]="equipo.numeroSerie"
               #equipoSerie="ngModel">
      </div>

      <div class="col-xs-1"></div>

      <div class="col-xs-1">
        <label class="form-equipo-label" for="lote">Nro. Lote:</label>
      </div>
      <div class="col-xs-2">
        <input class="form-control" id="lote"
               name="lote" [(ngModel)]="equipo.numeroLote"
               #equipoLote="ngModel">
      </div>
    </div>

    <div class="form-group row flex-items-xs-left">
      <div class="col-xs-2">
        <label class="form-equipo-label" for="estado">Estado:</label>
      </div>
      <div class="col-xs-3">
        <input class="form-control" id="estado"
               name="estado" [(ngModel)]="equipo.estado"
               #equipoEstado="ngModel">
      </div>
      <div class="col-xs-1"></div>

      <div class="col-xs-1">
        <label class="form-equipo-label" for="costo">Costo:</label>
      </div>
      <div class="col-xs-2">
        <input class="form-control" id="costo"
               name="costo" [(ngModel)]="equipo.costo"
               #equipoCosto="ngModel">
      </div>
    </div>

    <div class="form-group row flex-items-xs-left">
      <div class="col-xs-2">
        <label class="form-equipo-label">Representante:</label>
      </div>
      <div class="col-xs-3" *ngIf="equipo.representante != null">
        <input class="form-control" id="representante"
               name="representante" [(ngModel)]="equipo.representante.nombre"
               #equipoRepres="ngModel"
               disabled>
      </div>

      <div class="col-xs-3" *ngIf="equipo.representante == null">
        <input class="form-control" id="repre"
               disabled>
      </div>

      <div class="col-xs-1">
        <button class="btn-add-repre btn btn-sm btn-success"
                (click)="addRepresentante()">
          <clr-icon shape="user"></clr-icon>
          {{buttonTitle}}
        </button>
      </div>

      <div class="col-xs-1">
        <label class="form-equipo-label" for="descripcion">Descripci贸n:</label>
      </div>
      <div class="col-xs-4">
        <input class="form-control" id="descripcion"
               name="descripcion" [(ngModel)]="equipo.descripcionEquipo"
               #equipoDescripcion="ngModel">
      </div>


    </div>

    <div class="form-group row flex-items-xs-left">
      <div class="col-xs-2">
        <label class="form-equipo-label">Tipo:</label>
      </div>
      <div class="col-xs-3" *ngIf="equipo.tipoEquipo != null">
        <div class="select form-control">
          <select id="tipo" #selectTipo name="tipo"
                  [(ngModel)]="equipo.tipoEquipo.id"
                  (change)="onSelectedTipoEquipo(selectTipo.value)">
            <option *ngFor="let tipo of tipos"
                    value={{tipo.id}}>{{tipo.nombreGenerico}}
            </option>
          </select>
        </div>
      </div>
      <div class="col-xs-3" *ngIf="equipo.tipoEquipo == null">
        <div class="select form-control">
          <select id="tipoE" #selectTipoE name="tipoE"
                  [(ngModel)]="tipoEquipoNombre"
                  (change)="onSelectedTipoEquipo(selectTipoE.value)">
            <option disabled>Seleccionar Tipo</option>
            <option *ngFor="let tipo of tipos"
                    value={{tipo.id}}>{{tipo.nombreGenerico}}
            </option>
          </select>
        </div>
      </div>
      <div class="col-xs-1"></div>
      <div class="col-xs-1">
        <label class="form-equipo-label">Modelo:</label>
      </div>
      <div class="col-xs-4" *ngIf="equipo.modeloEquipo != null">
        <div class="select form-control">
          <select id="modelo" #selectModelo name="modelo"
                  [(ngModel)]="equipo.tipoEquipo.id"
                  (change)="onSelectedModeloEquipo(selectModelo.value)">
            <option *ngFor="let modelo of modelos"
                    value={{modelo.id}}>{{modelo.modelo}}
            </option>
          </select>
        </div>
      </div>
      <div class="col-xs-4" *ngIf="equipo.modeloEquipo == null">
        <div class="select form-control">
          <select id="modeloE" #selectModeloE name="modeloE"
                  [(ngModel)]="modeloEquipoNombre"
                  (change)="onSelectedModeloEquipo(selectModeloE.value)">
            <option disabled>Seleccionar Modelo</option>
            <option *ngFor="let modelo of modelos"
                    value={{modelo.id}}>{{modelo.modelo}}
            </option>
          </select>
        </div>
      </div>
    </div>

    <div class="form-group row flex-items-xs-left">
      <div class="col-xs-2">
        <label class="form-equipo-label" for="fab">Fabricaci贸n:</label>
      </div>
      <div class="col-xs-3">
        <input class="form-control" type="date"
               id="fab" size="35"
               name="fab"
               [(ngModel)]="equipo.fechaFabricacion"
               #fechaFab="ngModel">
      </div>
      <div class="col-xs-1"></div>
      <div class="col-xs-1">
        <label class="form-equipo-label" for="compra">Compra:</label>
      </div>
      <div class="col-xs-3">
        <input class="form-control" type="date"
               id="compra" size="35"
               name="compra"
               [(ngModel)]="equipo.fechaCompra"
               #fechaCompra="ngModel">
      </div>
    </div>

    <div class="form-group row flex-items-xs-left">
      <div class="col-xs-2">
        <label class="form-equipo-label" for="instalacion">Instalaci贸n:</label>
      </div>
      <div class="col-xs-3">
        <input class="form-control" type="date"
               id="instalacion" size="35"
               name="instalacion"
               [(ngModel)]="equipo.fechaInstalacion"
               #fechaInstalacion="ngModel">
      </div>
      <div class="col-xs-1"></div>
      <div class="col-xs-1">
        <label class="form-equipo-label" for="garantia">Garantia:</label>
      </div>
      <div class="col-xs-3">
        <input class="form-control" type="date"
               id="garantia" size="35"
               name="garantia"
               [(ngModel)]="equipo.fechaVenGarantia"
               #fechaGarantia="ngModel">
      </div>
    </div>

  </section>
  <section class="form-block">
    <button class="btn btn-sm btn-success"
            [disabled]="(equipoForm.form.invalid )"
            (click)="onSaveEquipo()">
      <clr-icon shape="thumbs-up"></clr-icon>
      Save
    </button>

    <button class="btn btn-sm btn-secondary"
            (click)="goBack()">
      <clr-icon shape="window-close"></clr-icon>
      Cancel
    </button>
  </section>
</form>


<!--Modal para agregar o editar los datos de un representante-->
<clr-modal [(clrModalOpen)]="modalRepreOpen" [clrModalClosable]="false">
  <h3 class="modal-title">{{modalTitle}}</h3>
  <div class="modal-body">
    <form class="compact" #repreForm="ngForm">
      <section class="form-block">
        <div class="form-group row flex-items-xs-left">
          <div class="col-xs-2">
            <label class="form-equipo-label" for="nombre">Nombre:</label>
          </div>
          <div class="col-xs-4">
            <input class="form-control" id="nombre"
                   name="nombre" [(ngModel)]="representante.nombre"
                   #nombreRepre="ngModel">
          </div>
        </div>

        <div class="form-group row flex-items-xs-left">
          <div class="col-xs-2">
            <label class="form-equipo-label" for="direccion">Direcci贸n:</label>
          </div>
          <div class="col-xs-8">
            <input class="form-control" id="direccion"
                   name="direccion" [(ngModel)]="representante.direccion"
                   #direRepre="ngModel">
          </div>
        </div>

        <div class="form-group row flex-items-xs-left">
          <div class="col-xs-2">
            <label class="form-equipo-label" for="email">Email:</label>
          </div>
          <div class="col-xs-8">
            <input class="form-control" id="email"
                   name="email" [(ngModel)]="representante.email"
                   #emailRepre="ngModel">
          </div>
        </div>

        <div class="form-group row flex-items-xs-left">
          <div class="col-xs-2">
            <label class="form-equipo-label" for="telefono">Telefono:</label>
          </div>
          <div class="col-xs-4">
            <input class="form-control" id="telefono"
                   name="telefono" [(ngModel)]="representante.telefono"
                   #telefonoRepre="ngModel">
          </div>
        </div>
      </section>
    </form>
  </div>
  <div class="modal-footer">
    <button class="btn btn-sm" type="button"
            (click)="modalRepreOpen = false">Cancel
    </button>
    <button class="btn btn-sm btn-success" type="button"
            [disabled]="(repreForm.form.invalid )"
            (click)="onAddRepresentante()">Add
    </button>
  </div>
</clr-modal>


